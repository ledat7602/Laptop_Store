# Thi·∫øt K·∫ø Database H·ªá Th·ªëng B√°n H√†ng Tr·ª±c Tuy·∫øn (E-commerce)

## üìã T·ªïng Quan

T√†i li·ªáu n√†y m√¥ t·∫£ thi·∫øt k·∫ø database ho√†n ch·ªânh cho h·ªá th·ªëng b√°n h√†ng tr·ª±c tuy·∫øn, bao g·ªìm qu·∫£n l√Ω s·∫£n ph·∫©m, kh√°ch h√†ng, ƒë∆°n h√†ng, gi·ªè h√†ng v√† nhi·ªÅu t√≠nh nƒÉng kh√°c.

## üóÑÔ∏è C·∫•u Tr√∫c Database

### **1. B·∫£ng Users (users)**
**M·ª•c ƒë√≠ch:** Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng c∆° b·∫£n

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| username | VARCHAR(255) UNIQUE | T√™n ƒëƒÉng nh·∫≠p |
| password | VARCHAR(255) | M·∫≠t kh·∫©u ƒë√£ m√£ h√≥a |
| email | VARCHAR(255) | Email ng∆∞·ªùi d√πng |
| full_name | VARCHAR(255) | H·ªç t√™n ƒë·∫ßy ƒë·ªß |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |
| is_active | BOOLEAN | Tr·∫°ng th√°i ho·∫°t ƒë·ªông |

### **2. B·∫£ng Categories (categories)**
**M·ª•c ƒë√≠ch:** Ph√¢n lo·∫°i s·∫£n ph·∫©m theo danh m·ª•c

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| name | VARCHAR(255) | T√™n danh m·ª•c |
| description | TEXT | M√¥ t·∫£ danh m·ª•c |
| slug | VARCHAR(255) UNIQUE | URL th√¢n thi·ªán |
| parent_id | BIGINT (FK) | Danh m·ª•c cha |
| level | INT | C·∫•p ƒë·ªô (0=g·ªëc, 1=c·∫•p 1...) |
| path | VARCHAR(500) | ƒê∆∞·ªùng d·∫´n ƒë·∫ßy ƒë·ªß |
| image_url | VARCHAR(500) | ·∫¢nh danh m·ª•c |
| icon | VARCHAR(100) | Icon danh m·ª•c |
| color | VARCHAR(7) | M√†u s·∫Øc (hex) |
| is_active | BOOLEAN | Tr·∫°ng th√°i ho·∫°t ƒë·ªông |
| is_featured | BOOLEAN | Danh m·ª•c n·ªïi b·∫≠t |
| sort_order | INT | Th·ª© t·ª± s·∫Øp x·∫øp |
| product_count | INT | S·ªë l∆∞·ª£ng s·∫£n ph·∫©m |
| meta_title | VARCHAR(255) | Ti√™u ƒë·ªÅ SEO |
| meta_description | VARCHAR(500) | M√¥ t·∫£ SEO |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **3. B·∫£ng Products (products)**
**M·ª•c ƒë√≠ch:** Qu·∫£n l√Ω th√¥ng tin s·∫£n ph·∫©m

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| name | VARCHAR(255) | T√™n s·∫£n ph·∫©m |
| description | TEXT | M√¥ t·∫£ chi ti·∫øt |
| short_description | VARCHAR(500) | M√¥ t·∫£ ng·∫Øn |
| price | DECIMAL(10,2) | Gi√° g·ªëc |
| sale_price | DECIMAL(10,2) | Gi√° khuy·∫øn m√£i |
| cost_price | DECIMAL(10,2) | Gi√° v·ªën |
| sku | VARCHAR(100) UNIQUE | M√£ s·∫£n ph·∫©m |
| stock_quantity | INT | S·ªë l∆∞·ª£ng t·ªìn kho |
| min_stock_level | INT | M·ª©c t·ªìn kho t·ªëi thi·ªÉu |
| weight | DECIMAL(8,3) | Tr·ªçng l∆∞·ª£ng (kg) |
| dimensions | VARCHAR(100) | K√≠ch th∆∞·ªõc |
| category_id | BIGINT (FK) | Danh m·ª•c |
| brand | VARCHAR(100) | Th∆∞∆°ng hi·ªáu |
| model | VARCHAR(100) | Model |
| color | VARCHAR(50) | M√†u s·∫Øc |
| size | VARCHAR(50) | K√≠ch c·ª° |
| material | VARCHAR(100) | Ch·∫•t li·ªáu |
| image_url | VARCHAR(500) | ·∫¢nh ch√≠nh |
| slug | VARCHAR(255) UNIQUE | URL th√¢n thi·ªán |
| is_active | BOOLEAN | Tr·∫°ng th√°i ho·∫°t ƒë·ªông |
| is_featured | BOOLEAN | S·∫£n ph·∫©m n·ªïi b·∫≠t |
| is_digital | BOOLEAN | S·∫£n ph·∫©m s·ªë |
| view_count | BIGINT | S·ªë l∆∞·ª£t xem |
| sales_count | BIGINT | S·ªë l∆∞·ª£t b√°n |
| rating | DECIMAL(3,2) | ƒê√°nh gi√° trung b√¨nh |
| review_count | INT | S·ªë ƒë√°nh gi√° |
| meta_title | VARCHAR(255) | Ti√™u ƒë·ªÅ SEO |
| meta_description | VARCHAR(500) | M√¥ t·∫£ SEO |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **4. B·∫£ng Product Images (product_images)**
**M·ª•c ƒë√≠ch:** L∆∞u tr·ªØ nhi·ªÅu ·∫£nh cho m·ªôt s·∫£n ph·∫©m

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| product_id | BIGINT (FK) | ID s·∫£n ph·∫©m |
| image_url | VARCHAR(500) | ƒê∆∞·ªùng d·∫´n ·∫£nh |

### **5. B·∫£ng Product Tags (product_tags)**
**M·ª•c ƒë√≠ch:** G·∫Øn th·∫ª cho s·∫£n ph·∫©m

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| product_id | BIGINT (FK) | ID s·∫£n ph·∫©m |
| tag | VARCHAR(100) | Th·∫ª |

### **6. B·∫£ng Customers (customers)**
**M·ª•c ƒë√≠ch:** Th√¥ng tin chi ti·∫øt kh√°ch h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| user_id | BIGINT (FK) | T√†i kho·∫£n ng∆∞·ªùi d√πng |
| first_name | VARCHAR(100) | T√™n |
| last_name | VARCHAR(100) | H·ªç |
| phone | VARCHAR(20) | S·ªë ƒëi·ªán tho·∫°i |
| date_of_birth | DATE | Ng√†y sinh |
| gender | ENUM | Gi·ªõi t√≠nh |
| avatar_url | VARCHAR(500) | ·∫¢nh ƒë·∫°i di·ªán |
| customer_type | ENUM | Lo·∫°i kh√°ch h√†ng |
| loyalty_points | INT | ƒêi·ªÉm t√≠ch l≈©y |
| total_orders | INT | T·ªïng ƒë∆°n h√†ng |
| total_spent | DECIMAL(15,2) | T·ªïng chi ti√™u |
| average_order_value | DECIMAL(10,2) | Gi√° tr·ªã ƒë∆°n h√†ng TB |
| preferred_language | VARCHAR(10) | Ng√¥n ng·ªØ ∆∞a th√≠ch |
| preferred_currency | VARCHAR(3) | Ti·ªÅn t·ªá ∆∞a th√≠ch |
| newsletter_subscribed | BOOLEAN | ƒêƒÉng k√Ω newsletter |
| sms_notifications | BOOLEAN | Th√¥ng b√°o SMS |
| email_notifications | BOOLEAN | Th√¥ng b√°o email |
| last_login_at | TIMESTAMP | L·∫ßn ƒëƒÉng nh·∫≠p cu·ªëi |
| last_order_at | TIMESTAMP | ƒê∆°n h√†ng cu·ªëi |
| notes | TEXT | Ghi ch√∫ |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **7. B·∫£ng Customer Addresses (customer_addresses)**
**M·ª•c ƒë√≠ch:** ƒê·ªãa ch·ªâ giao h√†ng c·ªßa kh√°ch h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| customer_id | BIGINT (FK) | ID kh√°ch h√†ng |
| type | ENUM | Lo·∫°i ƒë·ªãa ch·ªâ (HOME, OFFICE, OTHER) |
| is_default | BOOLEAN | ƒê·ªãa ch·ªâ m·∫∑c ƒë·ªãnh |
| recipient_name | VARCHAR(255) | T√™n ng∆∞·ªùi nh·∫≠n |
| phone | VARCHAR(20) | S·ªë ƒëi·ªán tho·∫°i |
| address_line_1 | VARCHAR(255) | ƒê·ªãa ch·ªâ d√≤ng 1 |
| address_line_2 | VARCHAR(255) | ƒê·ªãa ch·ªâ d√≤ng 2 |
| ward | VARCHAR(100) | Ph∆∞·ªùng/X√£ |
| district | VARCHAR(100) | Qu·∫≠n/Huy·ªán |
| city | VARCHAR(100) | Th√†nh ph·ªë/T·ªânh |
| country | VARCHAR(100) | Qu·ªëc gia |
| postal_code | VARCHAR(20) | M√£ b∆∞u ƒëi·ªán |
| latitude | DECIMAL(10,8) | Vƒ© ƒë·ªô |
| longitude | DECIMAL(11,8) | Kinh ƒë·ªô |
| notes | TEXT | Ghi ch√∫ giao h√†ng |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **8. B·∫£ng Orders (orders)**
**M·ª•c ƒë√≠ch:** Qu·∫£n l√Ω ƒë∆°n h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| order_number | VARCHAR(50) UNIQUE | M√£ ƒë∆°n h√†ng |
| customer_id | BIGINT (FK) | ID kh√°ch h√†ng |
| status | ENUM | Tr·∫°ng th√°i ƒë∆°n h√†ng |
| payment_status | ENUM | Tr·∫°ng th√°i thanh to√°n |
| payment_method | VARCHAR(50) | Ph∆∞∆°ng th·ª©c thanh to√°n |
| payment_transaction_id | VARCHAR(255) | M√£ giao d·ªãch |
| subtotal | DECIMAL(12,2) | T·ªïng ti·ªÅn h√†ng |
| tax_amount | DECIMAL(10,2) | Ti·ªÅn thu·∫ø |
| shipping_fee | DECIMAL(10,2) | Ph√≠ v·∫≠n chuy·ªÉn |
| discount_amount | DECIMAL(10,2) | Ti·ªÅn gi·∫£m gi√° |
| total_amount | DECIMAL(12,2) | T·ªïng thanh to√°n |
| paid_amount | DECIMAL(12,2) | S·ªë ti·ªÅn ƒë√£ tr·∫£ |
| coupon_code | VARCHAR(50) | M√£ gi·∫£m gi√° |
| customer_name | VARCHAR(255) | T√™n kh√°ch h√†ng |
| customer_email | VARCHAR(255) | Email kh√°ch h√†ng |
| customer_phone | VARCHAR(20) | SƒêT kh√°ch h√†ng |
| shipping_method | VARCHAR(100) | Ph∆∞∆°ng th·ª©c v·∫≠n chuy·ªÉn |
| shipping_tracking_number | VARCHAR(100) | M√£ v·∫≠n ƒë∆°n |
| shipping_recipient_name | VARCHAR(255) | T√™n ng∆∞·ªùi nh·∫≠n |
| shipping_phone | VARCHAR(20) | SƒêT ng∆∞·ªùi nh·∫≠n |
| shipping_address_line_1 | VARCHAR(255) | ƒê·ªãa ch·ªâ giao h√†ng 1 |
| shipping_address_line_2 | VARCHAR(255) | ƒê·ªãa ch·ªâ giao h√†ng 2 |
| shipping_ward | VARCHAR(100) | Ph∆∞·ªùng/X√£ |
| shipping_district | VARCHAR(100) | Qu·∫≠n/Huy·ªán |
| shipping_city | VARCHAR(100) | Th√†nh ph·ªë/T·ªânh |
| shipping_country | VARCHAR(100) | Qu·ªëc gia |
| estimated_delivery_date | TIMESTAMP | Ng√†y giao d·ª± ki·∫øn |
| actual_delivery_date | TIMESTAMP | Ng√†y giao th·ª±c t·∫ø |
| notes | TEXT | Ghi ch√∫ ƒë∆°n h√†ng |
| admin_notes | TEXT | Ghi ch√∫ admin |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |
| confirmed_at | TIMESTAMP | Th·ªùi gian x√°c nh·∫≠n |
| shipped_at | TIMESTAMP | Th·ªùi gian v·∫≠n chuy·ªÉn |
| delivered_at | TIMESTAMP | Th·ªùi gian giao h√†ng |
| cancelled_at | TIMESTAMP | Th·ªùi gian h·ªßy |
| cancellation_reason | TEXT | L√Ω do h·ªßy |

### **9. B·∫£ng Order Items (order_items)**
**M·ª•c ƒë√≠ch:** Chi ti·∫øt s·∫£n ph·∫©m trong ƒë∆°n h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| order_id | BIGINT (FK) | ID ƒë∆°n h√†ng |
| product_id | BIGINT (FK) | ID s·∫£n ph·∫©m |
| product_name | VARCHAR(255) | T√™n s·∫£n ph·∫©m |
| product_sku | VARCHAR(100) | M√£ s·∫£n ph·∫©m |
| product_image_url | VARCHAR(500) | ·∫¢nh s·∫£n ph·∫©m |
| unit_price | DECIMAL(10,2) | Gi√° ƒë∆°n v·ªã |
| original_price | DECIMAL(10,2) | Gi√° g·ªëc |
| discount_amount | DECIMAL(10,2) | Ti·ªÅn gi·∫£m gi√° |
| quantity | INT | S·ªë l∆∞·ª£ng |
| total_price | DECIMAL(12,2) | Th√†nh ti·ªÅn |
| variant_color | VARCHAR(50) | M√†u s·∫Øc |
| variant_size | VARCHAR(50) | K√≠ch c·ª° |
| variant_material | VARCHAR(100) | Ch·∫•t li·ªáu |
| variant_options | TEXT | T√πy ch·ªçn kh√°c (JSON) |
| status | ENUM | Tr·∫°ng th√°i item |
| shipped_quantity | INT | SL ƒë√£ v·∫≠n chuy·ªÉn |
| delivered_quantity | INT | SL ƒë√£ giao |
| returned_quantity | INT | SL ƒë√£ tr·∫£ |
| refunded_quantity | INT | SL ƒë√£ ho√†n ti·ªÅn |
| notes | TEXT | Ghi ch√∫ |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **10. B·∫£ng Shopping Carts (shopping_carts)**
**M·ª•c ƒë√≠ch:** Gi·ªè h√†ng c·ªßa kh√°ch h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| customer_id | BIGINT (FK) | ID kh√°ch h√†ng |
| session_id | VARCHAR(255) | Session ID (kh√°ch v√£ng lai) |
| total_items | INT | T·ªïng s·ªë items |
| subtotal | DECIMAL(12,2) | T·ªïng ti·ªÅn h√†ng |
| discount_amount | DECIMAL(10,2) | Ti·ªÅn gi·∫£m gi√° |
| coupon_code | VARCHAR(50) | M√£ gi·∫£m gi√° |
| estimated_tax | DECIMAL(10,2) | Thu·∫ø ∆∞·ªõc t√≠nh |
| estimated_shipping | DECIMAL(10,2) | Ph√≠ ship ∆∞·ªõc t√≠nh |
| estimated_total | DECIMAL(12,2) | T·ªïng ∆∞·ªõc t√≠nh |
| notes | TEXT | Ghi ch√∫ |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |
| last_activity_at | TIMESTAMP | Ho·∫°t ƒë·ªông cu·ªëi |

### **11. B·∫£ng Cart Items (cart_items)**
**M·ª•c ƒë√≠ch:** S·∫£n ph·∫©m trong gi·ªè h√†ng

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| shopping_cart_id | BIGINT (FK) | ID gi·ªè h√†ng |
| product_id | BIGINT (FK) | ID s·∫£n ph·∫©m |
| quantity | INT | S·ªë l∆∞·ª£ng |
| unit_price | DECIMAL(10,2) | Gi√° ƒë∆°n v·ªã |
| total_price | DECIMAL(12,2) | Th√†nh ti·ªÅn |
| variant_color | VARCHAR(50) | M√†u s·∫Øc |
| variant_size | VARCHAR(50) | K√≠ch c·ª° |
| variant_material | VARCHAR(100) | Ch·∫•t li·ªáu |
| variant_options | TEXT | T√πy ch·ªçn kh√°c (JSON) |
| notes | TEXT | Ghi ch√∫ |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

### **12. B·∫£ng Wishlist Items (wishlist_items)**
**M·ª•c ƒë√≠ch:** Danh s√°ch y√™u th√≠ch

| C·ªôt | Ki·ªÉu d·ªØ li·ªáu | M√¥ t·∫£ |
|-----|-------------|-------|
| id | BIGINT (PK) | ID t·ª± ƒë·ªông tƒÉng |
| customer_id | BIGINT (FK) | ID kh√°ch h√†ng |
| product_id | BIGINT (FK) | ID s·∫£n ph·∫©m |
| notes | TEXT | Ghi ch√∫ |
| priority | ENUM | M·ª©c ƒë·ªô ∆∞u ti√™n |
| is_public | BOOLEAN | C√¥ng khai |
| desired_quantity | INT | S·ªë l∆∞·ª£ng mong mu·ªën |
| price_alert_enabled | BOOLEAN | C·∫£nh b√°o gi√° |
| price_alert_threshold | DECIMAL(10,2) | Ng∆∞·ª°ng c·∫£nh b√°o gi√° |
| stock_alert_enabled | BOOLEAN | C·∫£nh b√°o t·ªìn kho |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |
| updated_at | TIMESTAMP | Th·ªùi gian c·∫≠p nh·∫≠t |

## üîó M·ªëi Quan H·ªá Database

### **Quan h·ªá One-to-One:**
- `users` ‚Üî `customers` (1:1)
- `customers` ‚Üî `shopping_carts` (1:1)

### **Quan h·ªá One-to-Many:**
- `categories` ‚Üí `categories` (parent-child)
- `categories` ‚Üí `products`
- `customers` ‚Üí `customer_addresses`
- `customers` ‚Üí `orders`
- `customers` ‚Üí `wishlist_items`
- `orders` ‚Üí `order_items`
- `products` ‚Üí `order_items`
- `products` ‚Üí `cart_items`
- `products` ‚Üí `wishlist_items`
- `shopping_carts` ‚Üí `cart_items`

### **Quan h·ªá Many-to-Many:**
- `products` ‚Üî `tags` (th√¥ng qua product_tags)
- `products` ‚Üî `images` (th√¥ng qua product_images)

## üìä Indexes ƒê·ªÅ Xu·∫•t

### **Indexes Ch√≠nh:**
```sql
-- Products
CREATE INDEX idx_products_category ON products(category_id);
CREATE INDEX idx_products_active ON products(is_active);
CREATE INDEX idx_products_featured ON products(is_featured);
CREATE INDEX idx_products_brand ON products(brand);
CREATE INDEX idx_products_price ON products(price);
CREATE INDEX idx_products_sale_price ON products(sale_price);
CREATE INDEX idx_products_stock ON products(stock_quantity);
CREATE INDEX idx_products_rating ON products(rating);
CREATE INDEX idx_products_created ON products(created_at);

-- Categories
CREATE INDEX idx_categories_parent ON categories(parent_id);
CREATE INDEX idx_categories_active ON categories(is_active);
CREATE INDEX idx_categories_featured ON categories(is_featured);
CREATE INDEX idx_categories_level ON categories(level);

-- Orders
CREATE INDEX idx_orders_customer ON orders(customer_id);
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_orders_payment_status ON orders(payment_status);
CREATE INDEX idx_orders_created ON orders(created_at);
CREATE INDEX idx_orders_number ON orders(order_number);

-- Customers
CREATE INDEX idx_customers_user ON customers(user_id);
CREATE INDEX idx_customers_type ON customers(customer_type);
CREATE INDEX idx_customers_phone ON customers(phone);
CREATE INDEX idx_customers_email ON customers(user_id, customer_id);
```

## üîí R√†ng Bu·ªôc Database

### **Foreign Key Constraints:**
- T·∫•t c·∫£ c√°c FK ƒë·ªÅu c√≥ ON DELETE CASCADE ho·∫∑c RESTRICT
- ƒê·∫£m b·∫£o t√≠nh to√†n v·∫πn d·ªØ li·ªáu

### **Check Constraints:**
```sql
-- Gi√° ph·∫£i >= 0
ALTER TABLE products ADD CONSTRAINT chk_price_positive CHECK (price >= 0);
ALTER TABLE products ADD CONSTRAINT chk_sale_price_positive CHECK (sale_price >= 0);

-- Stock ph·∫£i >= 0
ALTER TABLE products ADD CONSTRAINT chk_stock_positive CHECK (stock_quantity >= 0);

-- Quantity ph·∫£i > 0
ALTER TABLE order_items ADD CONSTRAINT chk_quantity_positive CHECK (quantity > 0);
ALTER TABLE cart_items ADD CONSTRAINT chk_quantity_positive CHECK (quantity > 0);
```

## üöÄ T·ªëi ∆Øu H√≥a Performance

### **1. Pagination:**
- S·ª≠ d·ª•ng LIMIT v√† OFFSET cho c√°c danh s√°ch l·ªõn
- Index tr√™n c√°c c·ªôt s·∫Øp x·∫øp

### **2. Caching:**
- Cache k·∫øt qu·∫£ truy v·∫•n th∆∞·ªùng xuy√™n
- Cache th√¥ng tin category hierarchy
- Cache product details

### **3. Partitioning:**
- Partition b·∫£ng orders theo th√°ng/nƒÉm
- Partition b·∫£ng order_items theo order_id

### **4. Archiving:**
- Archive c√°c ƒë∆°n h√†ng c≈© > 2 nƒÉm
- Archive log ho·∫°t ƒë·ªông c≈©

## üìù Ghi Ch√∫ Tri·ªÉn Khai

### **1. D·ªØ Li·ªáu M·∫´u:**
- T·∫°o categories m·∫´u (Electronics, Fashion, Books...)
- T·∫°o products m·∫´u v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin
- T·∫°o customers test

### **2. Migration Strategy:**
- T·∫°o tables theo th·ª© t·ª± dependencies
- Import d·ªØ li·ªáu master tr∆∞·ªõc (categories)
- Import d·ªØ li·ªáu transaction sau (orders)

### **3. Backup Strategy:**
- Full backup h√†ng ng√†y
- Incremental backup m·ªói gi·ªù
- Point-in-time recovery

---

**T√°c gi·∫£:** LeThanhDat  
**Ng√†y t·∫°o:** 26/08/2025  
**Phi√™n b·∫£n:** 1.0  
**M√¥i tr∆∞·ªùng:** Spring Boot + MySQL